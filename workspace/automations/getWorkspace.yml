slug: getWorkspace
name: 03_Tools/getWorkspaces
description: Get the list of automations of a workspace
arguments:
  body:
    type: object
    properties:
      arguments:
        type: object
        properties:
          workspace:
            type: string
            description: >-
              The workspace to search in. Can be one of: "AI Store", "AI
              Knowledge", or a custom workspace ID (e.g., "cYUcA4C")
do:
  - conditions:
      '{{body.arguments.workspace}} = "AI Store"':
        - set:
            name: workspaceId
            value: '{{global.workspacesRegistry["ai-store"].id}}'
      '{{body.arguments.workspace}} = "AI Knowledge"':
        - set:
            name: workspaceId
            value: '{{global.workspacesRegistry["ai-knowledge"].id}}'
      default:
        - set:
            name: workspaceId
            value: '{{body.arguments.workspace}}'
  - Prismeai API.getWorkspace:
      workspaceId: '{{workspaceId}}'
      output: workspaceContent
  - conditions:
      isObject({{workspaceContent}}):
        - set:
            name: stringifiedWorkspace
            value: '{% json({{workspaceContent}}) %}'
        - Custom Code.run:
            function: cleanYamlBrackets
            parameters:
              toClean: '{{stringifiedWorkspace}}'
            output: returnedValue
      default:
        - set:
            name: returnedValue
            value: |
              Error: No workspace found
validateArguments: true
output:
  content:
    - type: text
      text: '{{returnedValue}}'
